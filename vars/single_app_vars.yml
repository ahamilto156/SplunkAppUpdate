  vars_files:
  - splunk_vault.yml

sapp:
  - name: blah
    type: shared
    edit:
      path: "{{ ansible_user_dir }}/{{ sapp.name }}"
    source:
      path: "{{ splunk_home }}/etc/apps/{{ sapp.type }}/{{ sapp.name }}"
    tempfile:
      path: "/var/tmp"
      arch_name: "{{ sapp.tempfile.path }}/{{ sapp.name }}.bz2"

deployer_push_mode: full  #Default setting
    when: "{{ sapp.type }}" == shared
deployer_push_mode: local
    when: "{{ sapp.type }}" == local

splunk:
  - name: splunk_app
    base_dir: /opt/splunk
    exec: "{{ splunk.based_dir }}/bin/splunk"
    admin_user: splunk
    password: "{{ vault_splunk_password }}"

retry_num: 3
retry_delay: 10
